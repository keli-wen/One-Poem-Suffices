<svg width="802" height="510" viewBox="0 0 802 510" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="802" height="510" fill="white"/>

<!-- ==================== TITLE ==================== -->
<text x="15" y="22" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="17" font-weight="700" letter-spacing="-0.3">Snapshot: Append-only approval mode change</text>

<!-- ==================== LEGEND ==================== -->
<g transform="translate(15, 50)">
  <text x="0" y="0" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="13" font-weight="600">Role:</text>
  <!-- System: solid green -->
  <circle cx="56" cy="-4" r="8" fill="#A3D576" stroke="#386411" stroke-width="1"/>
  <text x="70" y="0" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="13">System</text>
  <!-- Developer: dotted pattern green -->
  <circle cx="148" cy="-4" r="8" fill="#E4F2D1" stroke="#386411" stroke-width="1"/>
  <text x="162" y="0" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="13">Developer</text>
  <!-- User: outlined -->
  <circle cx="256" cy="-4" r="8" fill="white" stroke="#386411" stroke-width="1"/>
  <text x="270" y="0" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="13">User</text>
  <!-- Assistant: light green filled -->
  <circle cx="320" cy="-4" r="8" fill="#D8ECBD" stroke="#386411" stroke-width="1"/>
  <text x="334" y="0" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="13">Assistant</text>
</g>

<!-- ==================== CONTAINER ==================== -->
<defs>
  <clipPath id="container-clip">
    <rect x="220" y="88" width="390" height="403" rx="2"/>
  </clipPath>
</defs>

<g clip-path="url(#container-clip)">

  <!-- ========== SECTION A: Original prefix (8 compressed rows) ========== -->
  <!-- Row 0: System (top, solid green) -->
  <rect x="220" y="88" width="390" height="9" fill="#A3D576"/>
  <!-- Row 1-2: System (green rows with borders) -->
  <rect x="220" y="97" width="390" height="9" fill="#E4F2D1"/>
  <rect x="220" y="106" width="390" height="9" fill="#E4F2D1"/>
  <!-- Row 3-4: Developer (light green) -->
  <rect x="220" y="115" width="390" height="9" fill="#E4F2D1"/>
  <rect x="220" y="124" width="390" height="9" fill="#E4F2D1"/>
  <!-- Row 5-7: User (white with horizontal stripes) -->
  <rect x="220" y="133" width="390" height="9" fill="white"/>
  <rect x="220" y="142" width="390" height="9" fill="white"/>
  <rect x="220" y="151" width="390" height="9" fill="white"/>

  <!-- Row borders (dark green) -->
  <line x1="220" y1="97"  x2="610" y2="97"  stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="106" x2="610" y2="106" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="115" x2="610" y2="115" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="124" x2="610" y2="124" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="133" x2="610" y2="133" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="142" x2="610" y2="142" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="151" x2="610" y2="151" stroke="#386411" stroke-width="0.5"/>

  <!-- Horizontal stripes for user rows -->
  <line x1="222" y1="136" x2="608" y2="136" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="139" x2="608" y2="139" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="145" x2="608" y2="145" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="148" x2="608" y2="148" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="154" x2="608" y2="154" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="157" x2="608" y2="157" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>

  <!-- ========== SECTION B: 1st turn conversation (6 compressed rows) ========== -->
  <rect x="220" y="165" width="390" height="9" fill="white"/>
  <rect x="220" y="174" width="390" height="9" fill="white"/>
  <rect x="220" y="183" width="390" height="9" fill="white"/>
  <rect x="220" y="192" width="390" height="9" fill="white"/>
  <rect x="220" y="201" width="390" height="9" fill="white"/>
  <rect x="220" y="210" width="390" height="9" fill="white"/>
  <!-- Borders -->
  <line x1="220" y1="165" x2="610" y2="165" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="174" x2="610" y2="174" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="183" x2="610" y2="183" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="192" x2="610" y2="192" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="201" x2="610" y2="201" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="210" x2="610" y2="210" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="219" x2="610" y2="219" stroke="#386411" stroke-width="0.5"/>
  <!-- Stripes -->
  <line x1="222" y1="168" x2="608" y2="168" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="171" x2="608" y2="171" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="177" x2="608" y2="177" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="180" x2="608" y2="180" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="186" x2="608" y2="186" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="189" x2="608" y2="189" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="195" x2="608" y2="195" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="198" x2="608" y2="198" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="204" x2="608" y2="204" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="207" x2="608" y2="207" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="213" x2="608" y2="213" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="216" x2="608" y2="216" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>

  <!-- ========== SECTION C: Assistant message (end of 1st turn) ========== -->
  <rect x="220" y="228" width="390" height="48" fill="#D8ECBD"/>

  <!-- ========== SECTION D: New developer message (highlighted) ========== -->
  <rect x="220" y="296" width="390" height="48" fill="#FFF8E1"/>

  <!-- ========== SECTION D2: New user message ========== -->
  <rect x="220" y="348" width="390" height="45" fill="white"/>

  <!-- ========== SECTION E: 2nd turn conversation (4 compressed rows) ========== -->
  <rect x="220" y="398" width="390" height="9" fill="white"/>
  <rect x="220" y="407" width="390" height="9" fill="white"/>
  <rect x="220" y="416" width="390" height="9" fill="white"/>
  <rect x="220" y="425" width="390" height="9" fill="white"/>
  <!-- Borders -->
  <line x1="220" y1="398" x2="610" y2="398" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="407" x2="610" y2="407" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="416" x2="610" y2="416" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="425" x2="610" y2="425" stroke="#386411" stroke-width="0.5"/>
  <line x1="220" y1="434" x2="610" y2="434" stroke="#386411" stroke-width="0.5"/>
  <!-- Stripes -->
  <line x1="222" y1="401" x2="608" y2="401" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="404" x2="608" y2="404" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="410" x2="608" y2="410" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="413" x2="608" y2="413" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="419" x2="608" y2="419" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="422" x2="608" y2="422" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="428" x2="608" y2="428" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>
  <line x1="222" y1="431" x2="608" y2="431" stroke="#666" stroke-opacity="0.5" stroke-width="0.5"/>

  <!-- ========== SECTION F: 2nd turn assistant message ========== -->
  <rect x="220" y="443" width="390" height="48" fill="#D8ECBD"/>

</g>

<!-- Container border (dark green, matching OAI style) -->
<rect x="220" y="88" width="390" height="403" rx="2" fill="none" stroke="#386411" stroke-width="1"/>

<!-- Expanded row borders (dark green) -->
<line x1="220" y1="228" x2="610" y2="228" stroke="#386411" stroke-width="0.5"/>
<line x1="220" y1="276" x2="610" y2="276" stroke="#386411" stroke-width="0.5"/>
<line x1="220" y1="296" x2="610" y2="296" stroke="#386411" stroke-width="0.5"/>
<line x1="220" y1="344" x2="610" y2="344" stroke="#386411" stroke-width="0.5"/>
<line x1="220" y1="348" x2="610" y2="348" stroke="#386411" stroke-width="0.5"/>
<line x1="220" y1="393" x2="610" y2="393" stroke="#386411" stroke-width="0.5"/>
<line x1="220" y1="443" x2="610" y2="443" stroke="#386411" stroke-width="0.5"/>

<!-- ========== HIGHLIGHT BORDER for new developer message ========== -->
<rect x="221" y="297" width="388" height="46" fill="none" stroke="#e67e22" stroke-width="2" stroke-dasharray="6,3"/>

<!-- ========== CACHE BOUNDARY dashed line ========== -->
<line x1="224" y1="286" x2="606" y2="286" stroke="#599227" stroke-width="1" stroke-dasharray="5,3"/>
<rect x="340" y="279" width="130" height="14" rx="2" fill="white"/>
<text x="405" y="290" text-anchor="middle" fill="#599227" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="9" font-weight="500">prompt cache boundary</text>

<!-- ==================== TEXT IN EXPANDED ROWS ==================== -->
<!-- Assistant message (Section C) -->
<text x="240" y="256" fill="#386411" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="13" font-style="italic">&#x201C;I added a diagram to explain the</text>
<text x="248" y="272" fill="#386411" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="13" font-style="italic">client / server architecture&#x201D;</text>

<!-- New developer message text -->
<text x="240" y="318" fill="#333" font-family="'SF Mono', 'Söhne Mono', Consolas, monospace" font-size="12">&lt;permissions instructions&gt;</text>
<text x="240" y="335" fill="#888" font-family="'SF Mono', 'Söhne Mono', Consolas, monospace" font-size="10.5">approval_mode = &#x201C;suggest&#x201D;</text>

<!-- "NEW" badge -->
<rect x="556" y="303" width="36" height="16" rx="4" fill="#e67e22"/>
<text x="574" y="314" text-anchor="middle" fill="white" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="9" font-weight="700">NEW</text>

<!-- User message text (Section D2) -->
<text x="240" y="374" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="13" font-style="italic">&#x201C;Now add a table of contents&#x201D;</text>

<!-- 2nd turn assistant message (Section F) -->
<text x="240" y="468" fill="#386411" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="13" font-style="italic">&#x201C;Done! I added a table of contents</text>
<text x="248" y="484" fill="#386411" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="13" font-style="italic">to README.md&#x201D;</text>

<!-- ==================== LEFT BRACKETS (OAI style) ==================== -->

<!-- Bracket 1: Original "input" (Section A: y=88 to y=160) -->
<!-- C-shaped bracket with rounded corners, opens to the right -->
<path d="M 220,92 L 210,92 C 204.5,92 200,96.5 200,102 L 200,124 L 200,150 C 200,155.5 204.5,160 210,160 L 220,160" fill="none" stroke="black" stroke-width="1"/>
<!-- Horizontal line from bracket midpoint -->
<path d="M 200,126 L 165,126" stroke="black" stroke-width="1"/>

<!-- Bracket 2: New "input" (Section D: y=296 to y=393) -->
<path d="M 220,300 L 210,300 C 204.5,300 200,304.5 200,310 L 200,345 L 200,383 C 200,388.5 204.5,393 210,393 L 220,393" fill="none" stroke="black" stroke-width="1"/>
<!-- Horizontal line from bracket midpoint -->
<path d="M 200,346 L 165,346" stroke="black" stroke-width="1"/>

<!-- ==================== LEFT ANNOTATION TEXT ==================== -->

<!-- Annotation 1: Original "input" -->
<text x="15" y="120" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="12">Original </text>
<text x="66" y="120" fill="#599227" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="12" font-weight="600">&#x201C;input&#x201D;</text>
<text x="15" y="137" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">Items from the</text>
<text x="15" y="151" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">first request</text>

<!-- Annotation 2: New "input" -->
<text x="15" y="340" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="12">New </text>
<text x="42" y="340" fill="#e67e22" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="12" font-weight="600">&#x201C;input&#x201D;</text>
<text x="15" y="357" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">Items appended for</text>
<text x="15" y="371" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">the 2nd turn of the</text>
<text x="15" y="385" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">conversation</text>

<!-- Annotation 3: Cache note -->
<text x="15" y="225" fill="#599227" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="10" font-weight="500">Prefix unchanged</text>
<text x="15" y="238" fill="#599227" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="10">&#x2192; prompt cache hit</text>

<!-- ==================== RIGHT ANNOTATIONS ==================== -->

<!-- Annotation 4: Original permissions callout -->
<path d="M 610,119 L 630,119" stroke="black" stroke-width="1"/>
<text x="636" y="113" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">Original</text>
<text x="636" y="127" fill="#599227" font-family="'SF Mono', 'Söhne Mono', Consolas, monospace" font-size="10">&lt;permissions</text>
<text x="636" y="140" fill="#599227" font-family="'SF Mono', 'Söhne Mono', Consolas, monospace" font-size="10">instructions&gt;</text>

<!-- Annotation 5: User message callout -->
<path d="M 610,155 L 630,155" stroke="black" stroke-width="1"/>
<text x="636" y="153" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">&#x201C;Add an architecture</text>
<text x="636" y="166" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">diagram to</text>
<text x="636" y="179" fill="#599227" font-family="'SF Mono', 'Söhne Mono', Consolas, monospace" font-size="10">README.md</text>
<text x="706" y="179" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">&#x201D;</text>

<!-- Annotation 6: New permissions explanation -->
<path d="M 610,320 L 630,320" stroke="#e67e22" stroke-width="1"/>
<text x="636" y="312" fill="#e67e22" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600">Appended, not replaced</text>
<text x="636" y="327" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">New developer message</text>
<text x="636" y="340" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">with updated sandbox</text>
<text x="636" y="353" fill="black" font-family="'Söhne', 'Inter', system-ui, sans-serif" font-size="11">config</text>

</svg>
